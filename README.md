# Discord 読み上げ BOT

テキストチャンネルに送られてきたチャットをボイスチャンネルで読み上げる BOT です。

[VOICEVOX](https://voicevox.hiroshiba.jp/)という無料のテキスト読み上げサービスを利用しています。
<br>
<br>

# 導入方法

heroku へデプロイ、もしくはローカルの Docker 環境でも実行できます。

## 事前準備

- <dl>
      <dt>Discord Botの初期設定</dt>
      <dd><a href="https://qiita.com/1ntegrale9/items/cb285053f2fa5d0cccdf">こちらの記事</a>を参考に設定を進めて行き、
      アクセストークンをメモして置いてください。</dd>
  </dl>
- <dl>
      <dt>WEB版 VOICEVOX のapiキー取得</dt>
      <dd><a href="https://su-shiki.com/api/">ここ</a>からapiキーを取得し、こちらもメモして置いてください。</dd>
    </dl>
  <br>

## **heroku へデプロイ**

[![Deploy](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy)

上のボタンからデプロイの設定へアクセスし入力欄を埋めて行きます。
<br>
<br>
App name: 好きな名前（他の人と被るとダメ）<br>
Choose a region: どこの国でも OK<br>
DISCORD_BOT_PREFIX: コマンドのプレフィックス。空欄でも可。空欄にすると”$”に設定されます。<br>
DISCORD_BOT_TOKEN: Bot のアクセストークン<br>
VOICEVOX_KEY: WEB 版 VOICEVOX の api キー<br>
VOICEVOX_SPEAKER: 話者 ID、声質のこと。下記数字で指定。<br>

```
0: 四国めたん あまあま
1: ずんだもん あまあま
2: 四国めたん ノーマル
3: ずんだもん ノーマル
4: 四国めたん セクシー
5: ずんだもん セクシー
6: 四国めたん ツンツン
7: ずんだもん ツンツン
8: 春日部つむぎ ノーマル
9: 波音リツ ノーマル
10: 雨晴はう ノーマル
11: 玄野武宏 ノーマル
12: 白上虎太郎 ノーマル
13: 青山龍星 ノーマル
14: 冥鳴ひまり ノーマル
```

Resources タブから Dyno を起動すると、BOT がオンラインになり使用可能になります。
<br>
<br>

## **Docker 環境での起動**

最初に環境変数を設定します。<br>
アプリのルートディレクトリ(docker-compose.yml のあるディレクトリ)に .env ファイルを作成し環境変数を記述して行きます。

```py
DISCORD_BOT_PREFIX=$ #コマンドのプレフィックス。空欄でも可。空欄にすると”$”に設定されます。
DISCORD_BOT_TOKEN=メモして置いたアクセストークン #BOTのアクセストークン
VOICEVOX_KEY=メモして置いたapiキー #WEB版VOICEVOXのapiキー
VOICEVOX_SPEAKER=0 #話者ID、声質のこと。数字で指定。
```

.env ファイルを作成したら、ターミナルからアプリのルートディレクトリに移動し下記コマンドを実行してください。

```sh
make up
```

BOT がオンラインになり使用可能になります。<br>
<br>

# 使い方

Discord のテキストチャンネルへコマンドを入力すると命令できます。<br>
例: `$接続`

プレフィックスを変更している場合は、"$"の部分を変更したプレフィックスに変えてください。

ボイスチャンネルに接続して、テキストチャンネルに `$接続` とコマンドを入力すると BOT がボイスチャンネルに接続します。<br>
その状態でテキストチャンネルにチャットをすると、BOT がチャットを読み上げてくれます。

ボイスチャンネルに誰もいなくなった場合は、BOT も自動で退室します。

## コマンド

```
$ヘルプ
コマンド一覧を表示します。
```

```
$接続
ボイスチャンネルに接続します。
```

```
$切断
ボイスチャンネルから切断します。
```

```
$呼び方変更 タグ 新しい呼び方
人の呼び方を変更します。タグは「名前#1234」の数字の部分。
名前がアルファベットなどの場合そのままアルファベットで読み上げてしまうので、分かりやすいように変更できます。

例：Yasuo#1234の場合
$呼び方変更 1234 やすお
「ワイエーエスユーオー」 → 「やすお」
```
